webpackJsonp([48],{YznD:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("jKCG"),i=r("x0bm"),o=r("J0+h"),l=o(a.a,i.a,null,null,null);e.default=l.exports},jKCG:function(t,e,r){"use strict";var a=r("lQSI"),i=r("xipm"),o=r("0xDb"),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t};e.a={props:["treeGridForm","formColumns","formRules","dataSource"],data:function(){return{dialogFormVisible:!1,textMap:{create:"新增",update:"编辑"},dialogStatus:"",temp:{},moduleOptions:["启用","禁用"],dataArr:[]}},computed:l({},r.i(a.b)(["name","avatar","roles"])),mapGetters:function(){},created:function(){var t=this,e=this;i.a.$on("jh-add-form",function(r){if(void 0!=r&&0===e.dataArr.length){var a=!0,i=!1,o=void 0;try{for(var l,n=r[Symbol.iterator]();!(a=(l=n.next()).done);a=!0){var s=l.value;s.children&&e.dataArr.push(s)}}catch(t){i=!0,o=t}finally{try{!a&&n.return&&n.return()}finally{if(i)throw o}}}t.temp={id:"",value:"",module:"是",status:"启用"},e.dialogStatus="create",e.dialogFormVisible=!0}),i.a.$on("jh-edit-form",function(t){e.temp=Object.assign({},t),e.dialogStatus="update",e.dialogFormVisible=!0})},methods:{create:function(){var t=this;this.$refs.temp.validate(function(e){if(e){t.temp.id=t.dataSource.length+1,t.temp.creatorName=t.name,t.temp.createTime=r.i(o.b)(new Date);var a=Object.assign({},t.temp);if(t.treeGridForm){var l=!0,n=!1,s=void 0;try{for(var u,m=t.dataArr[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var c=u.value;c.id==a.value&&(t.temp.id=c.children[c.children.length-1].id+1,c.children.unshift(a))}}catch(t){n=!0,s=t}finally{try{!l&&m.return&&m.return()}finally{if(n)throw s}}}else t.dataSource.unshift(a);t.resetForm(),i.a.$emit("formData"),t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})}})},update:function(){var t=this;this.$refs.temp.validate(function(e){t.temp.modifierName=t.name,t.temp.modifyTime=r.i(o.b)(new Date);var a=Object.assign({},t.temp);if(e){var l=!0,n=!1,s=void 0;try{for(var u,m=t.dataSource[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var c=u.value;if(c.id===a.id)for(var p in a)c[p]=a[p]}}catch(t){n=!0,s=t}finally{try{!l&&m.return&&m.return()}finally{if(n)throw s}}t.resetForm(),i.a.$emit("formData"),t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})}})},resetForm:function(){this.dialogFormVisible=!1,this.$refs.temp.resetFields()}}}},x0bm:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{ref:"temp",attrs:{model:t.temp,"label-width":"100px",rules:t.formRules}},t._l(t.formColumns,function(e){return r("el-form-item",{key:e.prop,attrs:{label:e.label,prop:e.prop}},["parentMenu"==e.prop?r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.temp.value,callback:function(e){t.temp.value=e},expression:"temp.value"}},t._l(t.dataArr,function(t){return r("el-option",{key:t.id,attrs:{label:t.unitName,value:t.id}})})):t._e(),t._v(" "),"status"==e.prop?r("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:t.temp.status,callback:function(e){t.temp.status=e},expression:"temp.status"}},t._l(t.moduleOptions,function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})):r("el-input",{attrs:{type:"text"},model:{value:t.temp[e.prop],callback:function(r){t.$set(t.temp,e.prop,r)},expression:"temp[item.prop]"}})],1)})),t._v(" "),r("div",{staticClass:"dialog-footer",slot:"footer"},[r("el-button",{on:{click:function(e){t.resetForm()}}},[t._v("取 消")]),t._v(" "),"create"==t.dialogStatus?r("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("确 定")]):r("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("确 定")])],1)],1)},i=[],o={render:a,staticRenderFns:i};e.a=o},xipm:function(t,e,r){"use strict";var a=r("UFcW");e.a=new a.default}});